<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>update</title>
    <!-- jquery cdn -->
    <script
            src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
            crossorigin="anonymous"></script>
    <style>
        .error-message {
            color: red;
        }
    </style>
</head>
<body>
<form action="/member/update" method="post" onsubmit="return validateForm()">
    <input type="hidden" th:value="${updateMember.id}" name="id"><br>
    이메일: <input type="text" th:value="${updateMember.memberEmail}" name="memberEmail" readonly> <br>
    비밀번호: <input type="password" id="memberPassword" th:value="${updateMember.memberPassword}" name="memberPassword"> <br>
    비밀번호 재확인: <input type="password" id="memberPasswordConfirm" name="memberPasswordConfirm" onkeyup="checkPasswordMatch()"> <br>
    <span id="password-match" class="error-message"></span><br>
    이름: <input type="text" th:value="${updateMember.memberName}" name="memberName"> <br>
    <input type="submit" value="정보수정">
</form>

<script>
    function checkPasswordMatch() {
        var password = document.getElementById("memberPassword").value;
        var confirmPassword = document.getElementById("memberPasswordConfirm").value;
        var matchMessage = document.getElementById("password-match");

        if (password !== confirmPassword) {
            matchMessage.innerHTML = "비밀번호가 동일하지 않습니다.";
        } else {
            matchMessage.innerHTML = "";
        }
    }

    function validateForm() {
        var password = document.getElementById("memberPassword").value;
        var confirmPassword = document.getElementById("memberPasswordConfirm").value;

        if (password !== confirmPassword) {
            alert("비밀번호가 동일하지 않습니다. 다시 확인해주세요.");
            return false; // 폼 제출을 막음
        }
        return true; // 폼 제출을 허용
    }
</script>
</body>
</html>

